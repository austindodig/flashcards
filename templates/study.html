<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Mode</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <h1>Study Mode</h1>

    {% if current_question and total > 0 %}
    <div class="progress">
        <p class="progress-text">Question {{ question_index + 1 }} of {{ total }}</p>
        <div class="progress-bar" data-progress="{{ ((question_index + 1) / total) * 100 }}"></div>
    </div>

    <!-- Flashcard -->
    <div class="flashcard" id="flashcard">
        <div class="flashcard-content">
            <p id="flashcard-text">{{ current_question['Question'] }}</p>
        </div>
        <button id="toggle-answer">Show Answer</button>
        <p id="answer" style="display: none;">{{ current_question['Answer'] }}</p>
        <button id="mark-important">Mark as Important</button>
    </div>

    <!-- Navigation -->
    <div class="navigation">
        <button id="previous" {% if question_index == 0 %}disabled{% endif %}>Previous</button>
        <button id="next" {% if question_index == total - 1 %}disabled{% endif %}>Next</button>
        <form method="POST" action="{{ url_for('reset_questions') }}">
            <button type="submit" class="reset-button">Reset Questions</button>
        </form>
    </div>
    {% else %}
    <p>No questions available. Please reset to select a topic.</p>
    <form method="POST" action="{{ url_for('reset_questions') }}">
        <button type="submit" class="reset-button">Select Topic</button>
    </form>
    {% endif %}

    <script>
        // Update progress bar dynamically
        document.addEventListener("DOMContentLoaded", () => {
            const progressBar = document.querySelector(".progress-bar");
            if (progressBar) {
                const progress = progressBar.getAttribute("data-progress") || 0;
                progressBar.style.width = `${progress}%`;
            }
        });
    </script>
</body>
</html>
